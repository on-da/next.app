{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\onda-shotarou\\\\next_app\\\\lib\\\\redux-store.js\";\nimport React from \"react\";\nimport { Component } from \"react\";\nimport { initStore } from \"../store\";\nvar isServer = typeof window === \"undefined\";\nconst_NRS_ = \"_NEXT_REDUX_STORE_\";\n\nfunction getOrCreateStore(initialState) {\n  if (isServer) {\n    return initStore(initialState);\n  }\n\n  if (!window[_NRS_]) {\n    window[_NRS_] = initStore(initialState);\n  }\n\n  return window[_NRS_];\n}\n\nexport default (function (App) {\n  return (\n    /*#__PURE__*/\n    function (_Component) {\n      _inherits(AppWithRedux, _Component);\n\n      _createClass(AppWithRedux, null, [{\n        key: \"getInitialProps\",\n        value: function () {\n          var _getInitialProps = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee(appContext) {\n            var reduxStore, appProps;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    reduxStore = getOrCreateStore();\n                    appContext.ctx.reduxStore = reduxStore;\n                    appProps = {};\n\n                    if (!(typeof App.getInitialProps === \"function\")) {\n                      _context.next = 7;\n                      break;\n                    }\n\n                    _context.next = 6;\n                    return App.getInitialProps(appContext);\n\n                  case 6:\n                    appProps = _context.sent;\n\n                  case 7:\n                    return _context.abrupt(\"return\", _objectSpread({}, appProps, {\n                      initialState: reduxStore.getState()\n                    }));\n\n                  case 8:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          function getInitialProps(_x) {\n            return _getInitialProps.apply(this, arguments);\n          }\n\n          return getInitialProps;\n        }()\n      }]);\n\n      function AppWithRedux(props) {\n        var _this;\n\n        _classCallCheck(this, AppWithRedux);\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(AppWithRedux).call(this, props));\n        _this.reduxStore = getOrCreateStore(props.initialReduxState);\n        return _this;\n      }\n\n      _createClass(AppWithRedux, [{\n        key: \"render\",\n        value: function render() {\n          return React.createElement(App, _extends({}, this.props, {\n            reduxStore: this.reduxStore,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 40\n            },\n            __self: this\n          }));\n        }\n      }]);\n\n      return AppWithRedux;\n    }(Component)\n  );\n});","map":{"version":3,"sources":["C:\\Users\\onda-shotarou\\next_app\\lib\\redux-store.js"],"names":["Component","initStore","isServer","window","const_NRS_","getOrCreateStore","initialState","_NRS_","App","appContext","reduxStore","ctx","appProps","getInitialProps","getState","props","initialReduxState"],"mappings":";;;;;;;;;;;AAAA,SAAOA,SAAP,QAAqB,OAArB;AACA,SAAOC,SAAP,QAAqB,UAArB;AAEA,IAAMC,QAAQ,GAAC,OAAOC,MAAP,KAAgB,WAA/B;AACAC,UAAU,GAAC,oBAAX;;AAEA,SAASC,gBAAT,CAA2BC,YAA3B,EAAwC;AACpC,MAAIJ,QAAJ,EAAa;AACT,WAAOD,SAAS,CAACK,YAAD,CAAhB;AACH;;AAED,MAAI,CAACH,MAAM,CAACI,KAAD,CAAX,EAAmB;AACfJ,IAAAA,MAAM,CAACI,KAAD,CAAN,GAAcN,SAAS,CAACK,YAAD,CAAvB;AACH;;AACD,SAAOH,MAAM,CAACI,KAAD,CAAb;AACH;;AAED,gBAAe,UAACC,GAAD,EAAQ;AACtB;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAEiCC,UAFjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAGaC,oBAAAA,UAHb,GAGwBL,gBAAgB,EAHxC;AAIOI,oBAAAA,UAAU,CAACE,GAAX,CAAeD,UAAf,GAA0BA,UAA1B;AACIE,oBAAAA,QALX,GAKoB,EALpB;;AAAA,0BAMW,OAAOJ,GAAG,CAACK,eAAX,KAA6B,UANxC;AAAA;AAAA;AAAA;;AAAA;AAAA,2BAO0BL,GAAG,CAACK,eAAJ,CAAoBJ,UAApB,CAP1B;;AAAA;AAOWG,oBAAAA,QAPX;;AAAA;AAAA,uEAUcA,QAVd;AAWWN,sBAAAA,YAAY,EAACI,UAAU,CAACI,QAAX;AAXxB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAeO,4BAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACd,0FAAMA,KAAN;AACA,cAAKL,UAAL,GAAgBL,gBAAgB,CAACU,KAAK,CAACC,iBAAP,CAAhC;AAFc;AAGjB;;AAlBR;AAAA;AAAA,iCAoBe;AACJ,iBAAM,oBAAC,GAAD,eAAQ,KAAKD,KAAb;AACL,YAAA,UAAU,EAAE,KAAKL,UADZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAN;AAEH;AAvBR;;AAAA;AAAA,MAAkCV,SAAlC;AAAA;AAyBC,CA1BF","sourcesContent":["import{Component}from\"react\";\r\nimport{initStore}from\"../store\";\r\n\r\nconst isServer=typeof window===\"undefined\"\r\nconst_NRS_=\"_NEXT_REDUX_STORE_\"\r\n\r\nfunction getOrCreateStore (initialState){\r\n    if (isServer){\r\n        return initStore(initialState)\r\n    }\r\n\r\n    if (!window[_NRS_]){\r\n        window[_NRS_]=initStore(initialState)\r\n    }\r\n    return window[_NRS_]\r\n}\r\n\r\nexport default (App) =>{\r\n return class AppWithRedux extends Component{\r\n\r\n    static async getInitialProps (appContext){\r\n        const reduxStore=getOrCreateStore()\r\n        appContext.ctx.reduxStore=reduxStore\r\n        let appProps={}\r\n        if (typeof App.getInitialProps===\"function\"){\r\n            appProps=await App.getInitialProps(appContext)\r\n        }\r\n        return{\r\n            ...appProps,\r\n            initialState:reduxStore.getState()\r\n        }\r\n        }\r\n\r\n        constructor(props){\r\n            super(props)\r\n            this.reduxStore=getOrCreateStore(props.initialReduxState)\r\n        }\r\n\r\n        render(){\r\n            return<App{...this.props}\r\n             reduxStore={this.reduxStore}/>\r\n        }\r\n    }\r\n }   "]},"metadata":{},"sourceType":"module"}